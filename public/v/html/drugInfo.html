<!DOCTYPE html>
<!-- 主体布局架构 -->
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>

    <!-- css文件 -->
    <link href="../css/root.css" rel="stylesheet">

    <style>
        body {
            background-color: #edf0f5;
        }
    </style>

    <!-- js文件 -->
    <script src="../js/jquery.min.js"></script>

</head>

<body>
    <!-- 页面加载 -->
    <div class="loading"><img src="../img/loading.gif" alt="加载中"></div>

    <!-- 顶层 -->
    <div id="top" class="clearfix">

        <div class="applogo">
            <a class="logo">菜单</a>
        </div>

        <!-- 隐藏显示菜单图标 -->
        <a href="#" class="sidebar-open-button"><i class="fa fa-bars"></i></a>
        <a href="#" class="sidebar-open-button-mobile"><i class="fa fa-bars"></i></a>

        <!-- 页面标题 -->
        <h1 class="title">自助售药机后台管理系统</h1>

    </div>

    <!-- 左侧栏 -->
    <div class="sidebar clearfix">

        <!-- 用户信息 -->
        <div class="dropdown link">
            <a href="#" data-toggle="dropdown" class="dropdown-toggle profilebox">
                <img src="../img/profileimg.png" alt="img">
                <div class="user-name"><b id="userInfo"></b><span class="caret"></span></div>
            </a>
            <script>
                // 设置当前用户信息
                $("#userInfo").text(user.realname + "(" + user.username + ")");
            </script>
            <ul class="dropdown-menu dropdown-menu-list dropdown-menu-right">
                <li role="presentation" class="dropdown-header">选项</li>
                <li><a href="login.html"><i class="fa falist fa-power-off"></i> 退出</a></li>
            </ul>
        </div>
        <!-- 菜单 -->
        <ul class="sidebar-panel nav">
            <li class="sidetitle">机器管理</li>
            <li><a href="runStatus.html"><span class="icon color5"><i class="fa fa-home"></i></span>运行状态</a></li>
            <li>
                <a href="#"><span class="icon color7"><i class="fa fa-laptop"></i></span>药机管理<span
                        class="caret"></span></a>
                <ul>
                    <li><a href="machineGroup.html">机器分组</a></li>
                    <li><a href="motorInfo.html">货道设置</a></li>
                    <li><a href="machineInfo.html">机器信息设置</a></li>
                    <li><a href="maintain.html">机器维护</a></li>
                </ul>
            </li>
            <li><a href="wsdChart.html"><span class="icon color6"><i class="fa fa-bar-chart"></i></span>温湿度详情</a></li>
            <li><a href="warningStatus.html"><span class="icon color6"><i class="fa fa-bar-chart"></i></span>警报详情</a>
            </li>
        </ul>
        <ul class="sidebar-panel nav">
            <li class="sidetitle">药品管理</li>
            <li><a href="categoryInfo.html"><span class="icon color5"><i class="fa fa-folder"></i></span>分类管理</a></li>
            <li><a href="drugInfo.html"><span class="icon color6"><i class="fa fa-calendar"></i></span>药品列表</a></li>
            <li style="display:none"><a href="#"><span class="icon color7"><i
                            class="fa fa-sort-amount-asc"></i></span>期效管理<span class="caret"></span></a></li>
            <li><a href="lotNumber.html"><span class="icon color6"><i class="fa fa-file-word-o"></i></span>批号管理</a></li>
            <li><a href="situation.html"><span class="icon color5"><i class="fa fa-folder"></i></span>病情管理</a></li>

        </ul>
        <ul class="sidebar-panel nav">
            <li class="sidetitle">记录管理</li>
            <li><a href="saleRecord.html"><span class="icon color5"><i class="fa fa-calendar-o"></i></span>销售记录</a></li>
            <li style="display:none"> <a href=""><span class="icon color6"><i class="fa fa-calendar"></i></span>操作记录</a>
            <li>
                <a href="#"><span class="icon color7"><i class="fa fa-calendar-o"></i></span>药品记录<span
                        class="caret"></span></a>
                <ul>
                    <li><a href="addDrugInfo.html">上药记录</a></li>
                    <li><a href="subDrugInfo.html">撤药记录</a></li>
                </ul>
            </li>
            <li><a href="" style="display:none"><span class="icon color6"><i class="fa fa-calendar"></i></span>报警记录</a>
            </li>
        </ul>
        <ul class="sidebar-panel nav">
            <li class="sidetitle">用户管理</li>
            <li><a href="userInfo.html"><span class="icon color5"><i class="fa fa-user"></i></span>用户信息</a></li>
        </ul>
        <ul class="sidebar-panel nav" style="display:none">
            <li class="sidetitle">财务管理</li>
            <li><a href="blank1.html"><span class="icon color5"><i class="fa fa-calendar-o"></i></span>销售统计</a></li>
        </ul>
        <ul class="sidebar-panel nav">
            <li class="sidetitle">其他设置</li>
            <li><a href="sysSetting.html"><span class="icon color12"><i class="fa fa-cog"></i></span>系统设置</a></li>
        </ul>
    </div>

    <!-- 主内容 -->
    <div class="content">

        <!-- 当前页面的菜单位置 -->
        <div class="page-header">
            <ol class="breadcrumb" id="breadcrumb">
                <li>药品管理</li>
                <li>药品列表</li>
            </ol>
        </div>

        <!-- 内容 -->
        <div class="container-padding container-widget" id="content">

            <!-- 搜索条件 -->
            <div class="row">

                <div class="col-md-12 col-lg-12">

                    <div class="panel panel-default">
                        <div class="panel-title" style="font-size:15px">搜索条件</div>
                        <div class="panel-body">
                            <div class="form-horizontal">
                                <div class="col-lg-1 col-md-1 text-right">
                                    <label for="machine_group_id" class="form-label control-label">药品分类：</label>
                                </div>
                                <div class="col-lg-2 col-md-2">
                                    <select class="selectpicker" data-live-search="true" id="machine_group_id"></select>
                                </div>
                                <div class="col-lg-1 col-md-1 text-right">
                                    <label for="sbq" class="form-label control-label">病情分类：</label>
                                </div>
                                <div class="col-lg-2 col-md-2">
                                    <select class="selectpicker" data-live-search="true" id="sbq"></select>
                                </div>
                                <div class="col-lg-1 col-md-1 text-right">
                                    <label for="drug_name" class="control-label form-label">药品名称：</label>
                                </div>
                                <div class="col-lg-2 col-md-2">
                                    <input type="text" class="form-control form-control-radius" id="drug_name">
                                </div>
                                <div class="col-lg-3 col-md-3 ">
                                    <a id="search" class="btn btn-rounded btn-default" onclick="tb = mySearch()">查 询</a>
                                    &nbsp;&nbsp;&nbsp;&nbsp;
                                    <a id="search" class="btn btn-rounded btn-success" data-toggle='modal'
                                        data-target='#adddrug'
                                        onclick="$('#adbq').selectpicker('val', '0'); $('#adbq').change(); $('#cate').selectpicker('val', '0'); $('#cate').change(); $('#factory').val(''); $('#spe').val(''); $('#attr').val(''); $('#dName').val('')">添加药品</a>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

            </div>

            <!-- 运行状态表格 -->
            <div class="row">

                <div class="col-md-12 col-lg-12">

                    <div class="panel panel-default">

                        <div class="panel-body">

                            <div class="panel-body table-responsive" id="tableParent">
                                <table id="table" class="table "></table>
                            </div>

                        </div>

                    </div>

                </div>

            </div>


        </div>

    </div>

    <!-- 底部信息 -->
    <div class="row footer" style="display:none">
        <div class="col-md-6 text-left">
            Copyright &copy; 2018.Company name All rights reserved.<a href="#">沈阳华天基曼龙有限公司</a>
        </div>
        <div class="col-md-6 text-right"></div>
    </div>

    <!-- 错误提示 -->
    <div id="alerttop" class="Modern-alert Modern-alert-icon Modern-alert-click alert6 Modern-alert-top"></div>
    <!-- 成功提示 -->
    <div id="successtop" class="Modern-alert Modern-alert-icon Modern-alert-click alert3 Modern-alert-top"></div>

    <!-- 修改信息弹出的对话框 -->
    <div class="modal fade" id="alter" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">修改</h4>
                </div>
                <div class="modal-body">
                    <div role="tabpanel">

                        <!-- tab标题 -->
                        <ul class="nav nav-tabs" role="tablist">
                            <li role="presentation" class="active"><a href="#home" aria-controls="home" role="tab"
                                    data-toggle="tab">药品信息</a></li>
                            <li role="presentation"><a href="#profile" aria-controls="profile" role="tab"
                                    data-toggle="tab">药品图片</a></li>
                            <li role="presentation"><a href="#messages" aria-controls="messages" role="tab"
                                    data-toggle="tab">说明图片</a></li>
                        </ul>
                        <!-- Tab 内容 -->
                        <div class="tab-content">
                            <div role="tabpanel" class="tab-pane active" id="home">
                                <div class="horizontal">
                                    <div class="form-group">
                                        <label for="aldName" class="form-label">药品名称：</label>
                                        <input type="text" class="form-control form-control-radius" id="aldName"
                                            value="" spellcheck="false">
                                    </div>
                                    <div class="form-group">
                                        <label for="alattr" class="form-label">拼音缩写：</label>
                                        <input type="text" class="form-control form-control-radius" id="alattr" value=""
                                            spellcheck="false">
                                    </div>
                                    <div class="form-group">
                                        <label for="alspe" class="form-label">药品规格：</label>
                                        <input type="text" class="form-control form-control-radius" id="alspe" value=""
                                            spellcheck="false">
                                    </div>
                                    <div class="form-group">
                                        <label for="alfactory" class="form-label">生产厂家：</label>
                                        <input type="text" class="form-control form-control-radius" id="alfactory"
                                            value="" spellcheck="false">
                                    </div>
                                    <div class="form-group">
                                        <label for="alcate" class="form-label">分类：</label>
                                        <select class="selectpicker form-control" data-live-search="true"
                                            id="alcate"></select>
                                    </div>
                                    <div class="form-group">
                                        <label for="albq" class="form-label">病情：</label>
                                        <select class="selectpicker form-control" data-live-search="true"
                                            id="albq"></select>
                                    </div>
                                </div>
                            </div>
                            <div role="tabpanel" class="tab-pane" id="profile">
                                <a id="a1" onclick="commonBind.OpenFileDialog($(currentRow).attr('data-id'),'1')"><img
                                        src="" alt="点我更换图片" width="250px" height="150px" id="addImage" /></a>
                            </div>

                            <div role="tabpanel" class="tab-pane" id="messages">
                                <a id="a2" onclick="commonBind.OpenFileDialog($(currentRow).attr('data-id'),'2')"><img
                                        src="" alt="点我更换图片" width="250px" height="150px" id="addMul" /></a>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-white" data-dismiss="modal" id="alterClose">关闭</button>
                    <button type="button" class="btn btn-default" onclick="alDrug()">保存</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 添加对话框 -->
    <div class="modal fade" id="adddrug" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">添加药品</h4>
                </div>
                <div class="modal-body">
                    <div class="horizontal">
                        <div class="form-group">
                            <label for="dName" class="form-label">药品名称：</label>
                            <input type="text" class="form-control form-control-radius" id="dName" value=""
                                spellcheck="false">
                        </div>
                        <div class="form-group">
                            <label for="attr" class="form-label">拼音缩写：</label>
                            <input type="text" class="form-control form-control-radius" id="attr" value=""
                                spellcheck="false">
                        </div>
                        <div class="form-group">
                            <label for="spe" class="form-label">药品规格：</label>
                            <input type="text" class="form-control form-control-radius" id="spe" value=""
                                spellcheck="false">
                        </div>
                        <div class="form-group">
                            <label for="factory" class="form-label">生产厂家：</label>
                            <input type="text" class="form-control form-control-radius" id="factory" value=""
                                spellcheck="false">
                        </div>
                        <div class="form-group">
                            <label for="cate" class="form-label">分类：</label>
                            <select class="selectpicker form-control" data-live-search="true" id="cate"></select>
                        </div>
                        <div class="form-group">
                            <label for="adbq" class="form-label">病情：</label>
                            <select class="selectpicker form-control" data-live-search="true" id="adbq"></select>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-white" data-dismiss="modal" id="addClose"
                        onclick="">关闭</button>
                    <button type="button" class="btn btn-default" onclick="adDrug()">保存</button>
                </div>

            </div>
        </div>
    </div>


    <script src="../js/bootstrap/bootstrap.min.js"></script>
    <script src="../js/plugins.js"></script>
    <script src="../js/datatables/datatables.min.js"></script> <!-- Data Tables -->
    <script src="../js/bootstrap-select/bootstrap-select.js"></script> <!-- Bootstrap Select -->
    <script src="../js/bootstrap-toggle/bootstrap-toggle.min.js"></script> <!-- Bootstrap Toggle -->
    <script src="../js/moment/moment.min.js"></script> <!-- Moment.js -->
    <script src="../js/date-range-picker/daterangepicker.js"></script> <!-- Bootstrap Date Range Picker -->
    <script src="../js/sweet-alert/sweet-alert.min.js"></script> <!-- Sweet Alert -->
    <script src="../js/Modern-alert/main.js"></script><!-- Modern Alert -->

    <script>
        // 修改药品信息
        function alDrug() {
            if ($('#aldName').val() == '') {
                $("#alerttop").text('请输入药品名称');
                $("#successtop").fadeOut(1);
                $("#alerttop").fadeIn(350);
                if (timeout != null) {
                    clearTimeout(timeout);
                }
                timeout = setTimeout(function () { $("#alerttop").fadeOut(350); }, 2000);
                return;
            }
            var patt = new RegExp(/[!@#\$\^&\(\)\|\?\\\[\]\{=\'\"]/);
            if (patt.test($('#aldName').val()) || patt.test($('#alattr').val()) || patt.test($('#alspe').val()) || patt.test($('#alfactory').val())) {
                $("#alerttop").text('不能输入特殊字符');
                $("#successtop").fadeOut(1);
                $("#alerttop").fadeIn(350);
                if (timeout != null) {
                    clearTimeout(timeout);
                }
                timeout = setTimeout(function () { $("#alerttop").fadeOut(350); }, 2000);
                return;
            }

            if (commonBind.AlterDrug($(currentRow).attr('data-id'), $('#aldName').val(), $('#alattr').val(), $('#alspe').val(), $('#alfactory').val(), $('#alcate').val(), $('#albq').val())) {
                $("#successtop").text('修改成功');
                $("#alerttop").fadeOut(1);
                $("#successtop").fadeIn(350);
                if (timeout != null) {
                    clearTimeout(timeout);
                }
                $('#alterClose').click();
                tb.draw(true); // 重新绘制表格
                timeout = setTimeout(function () { $("#successtop").fadeOut(350); }, 2000);

            } else {
                $("#alerttop").text('修改失败');
                $("#successtop").fadeOut(1);
                $("#alerttop").fadeIn(350);
                if (timeout != null) {
                    clearTimeout(timeout);
                }
                timeout = setTimeout(function () { $("#alerttop").fadeOut(350); }, 2000);
            }
        }

        // 删除药品
        function deleteDrug(obj) {
            swal({
                title: "删除药品?",
                text: "确定要删除该药品吗？",
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: "#DD6B55",
                confirmButtonText: "确认",
                cancelButtonText: "取消",
                closeOnConfirm: true,
                closeOnCancel: true
            },
                function (isConfirm) {
                    if (isConfirm) {

                        var id = $(obj).parents('tr').attr('data-id');
                        if (commonBind.DeleteDrug(id)) {
                            $("#successtop").text('删除成功');
                            $("#alerttop").fadeOut(1);
                            $("#successtop").fadeIn(350);
                            if (timeout != null) {
                                clearTimeout(timeout);
                            }
                            timeout = setTimeout(function () { $("#successtop").fadeOut(350); }, 2000);
                            tb.draw(true);
                            $("#alterClose").click();
                        } else {
                            $("#alerttop").text('删除失败');
                            $("#successtop").fadeOut(1);
                            $("#alerttop").fadeIn(350);
                            if (timeout != null) {
                                clearTimeout(timeout);
                            }
                            timeout = setTimeout(function () { $("#alerttop").fadeOut(350); }, 2000);
                        }
                        //swal("Deleted!", "Your imaginary file has been deleted.", "success");
                    } else {
                        //swal("Cancelled", "Your imaginary file is safe :)", "error");
                    }
                });

        }


        // 添加药品
        function adDrug() {
            if ($('#dName').val() == '') {
                $("#alerttop").text('请输入药品名称');
                $("#successtop").fadeOut(1);
                $("#alerttop").fadeIn(350);
                if (timeout != null) {
                    clearTimeout(timeout);
                }
                timeout = setTimeout(function () { $("#alerttop").fadeOut(350); }, 2000);
                return;
            }
            var patt = new RegExp(/[!@#\$\^&\(\)\|\?\\\[\]\{=\'\"]/);
            if (patt.test($('#dName').val()) || patt.test($('#attr').val()) || patt.test($('#spe').val()) || patt.test($('#factory').val())) {
                $("#alerttop").text('不能输入特殊字符');
                $("#successtop").fadeOut(1);
                $("#alerttop").fadeIn(350);
                if (timeout != null) {
                    clearTimeout(timeout);
                }
                timeout = setTimeout(function () { $("#alerttop").fadeOut(350); }, 2000);
                return;
            }

            if (commonBind.AddDrug($('#dName').val(), $('#attr').val(), $('#spe').val(), $('#factory').val(), $('#cate').val(), $('#adbq').val())) {
                $("#successtop").text('添加成功');
                $("#alerttop").fadeOut(1);
                $("#successtop").fadeIn(350);
                if (timeout != null) {
                    clearTimeout(timeout);
                }
                $('#addClose').click();
                tb.draw(true); // 重新绘制表格
                timeout = setTimeout(function () { $("#successtop").fadeOut(350); }, 2000);

            } else {
                $("#alerttop").text('添加失败');
                $("#successtop").fadeOut(1);
                $("#alerttop").fadeIn(350);
                if (timeout != null) {
                    clearTimeout(timeout);
                }
                timeout = setTimeout(function () { $("#alerttop").fadeOut(350); }, 2000);
            }
        }

        // 添加药品分类下拉列表项
        var machineGroupObj = JSON.parse(commonBind.CategorySelecter());
        var machine_group_name = "<option value='0'>无</option>"
        for (var gindex = 0; gindex < machineGroupObj.length; gindex++) {
            machine_group_name += "<option value='" + machineGroupObj[gindex].id + "'>" + machineGroupObj[gindex].category_name + "</option>"
        }
        $("#machine_group_id").append(machine_group_name);
        $('#machine_group_id').selectpicker('refresh');
        $('#machine_group_id').selectpicker('render');
        $("#cate").append(machine_group_name);
        $('#cate').selectpicker('refresh');
        $('#cate').selectpicker('render');
        $("#alcate").append(machine_group_name);
        $('#alcate').selectpicker('refresh');
        $('#alcate').selectpicker('render');

        // 添加病情分类下拉列表项
        var machineGroupObj = JSON.parse(commonBind.SituationSelecter());
        var machine_group_name = "<option value='0'>无</option>"
        for (var gindex = 0; gindex < machineGroupObj.length; gindex++) {
            machine_group_name += "<option value='" + machineGroupObj[gindex].id + "'>" + machineGroupObj[gindex].situation_name + "</option>"
        }
        $("#sbq").append(machine_group_name);
        $('#sbq').selectpicker('refresh');
        $('#sbq').selectpicker('render');
        $("#adbq").append(machine_group_name);
        $('#adbq').selectpicker('refresh');
        $('#adbq').selectpicker('render');
        $("#albq").append(machine_group_name);
        $('#albq').selectpicker('refresh');
        $('#albq').selectpicker('render');


        var currentRow = null;
        // 获取当前按钮的行
        function getRow(obj) {
            return $(obj).parents('tr');
        }

        function alterInit(obj) {
            currentRow = getRow(obj);
            $("#aldName").val($("td", currentRow).eq(1).text());
            $("#alattr").val($("td", currentRow).eq(3).text());
            $("#alspe").val($("td", currentRow).eq(6).text());
            $("#alfactory").val($("td", currentRow).eq(5).text());
            $('#addImage').attr('src', $(currentRow).attr('data-durg-image'));
            $('#addMul').attr('src', $(currentRow).attr('data-manual-image'));
            $("#alcate").selectpicker("val", $(currentRow).attr('data-category-id'));
            $("#alcate").change();
            $("#albq").selectpicker("val", $(currentRow).attr('data-situation-id'));
            $("#albq").change();
        }

        var tb = null;
        // 查询
        function mySearch() {
            var drugName = $('#drug_name').val().trim();
            var categoryId = $('#machine_group_id').val();
            var situationId = $('#sbq').val();

            $("#tableParent").empty();
            $("#tableParent").append("<table id='table' class='table'><thead><tr><th>药品图片</th><th>药品名称</th><th>说明图片</th><th>拼音缩写</th><th>所属分类</th><th>生产厂家</th><th>规格</th><th>病情</th><th>操作</th></tr></thead></table>");

            return $('#table').DataTable({
                //"processing": true, // 显示正在加载
                "serverSide": true, // 服务器模式
                "ajax": {
                    "cache": false,
                    "type": "POST",
                    "dataType": "JSON",
                    "url": "http://127.0.0.1:8081/drugInfo",
                    "data": { "categoryId": categoryId + "", "drugName": drugName + "", "situationId": situationId + "" }
                },
                "pagingType": "full_numbers", // 显示全部分页按钮
                "iDisplayLength": 50, // 每页显示条数
                "bFilter": false, // 右上角过滤搜索
                "bInfo": false,   // 左下角信息
                "bLengthChange": false, // 左上角条数选择
                "ordering": false, // 禁止排序
                "createdRow": function (row, datat, index) {

                    $(row).attr('data-id', datat.id);
                    $(row).attr('data-category-id', datat.category_id);
                    $(row).attr('data-situation-id', datat.situation_id);
                    $(row).attr('data-durg-image', datat.drug_image);
                    $(row).attr('data-manual-image', datat.manual_image);


                    // 修改按钮
                    var alterButton = "<a class='btn btn-default' data-toggle='modal' data-target='#alter' onclick='alterInit(this);'><i class='fa fa-gears'></i>修改</a>";
                    var deleteButton = "<a  class='btn btn-danger' onclick='deleteDrug(this)'><i class='fa fa-trash-o'></i>删除</a>";
                    $('td', row).eq(8).html(alterButton + deleteButton);

                    $('td', row).eq(0).html("<img src='" + datat.drug_image + "' width='100px'>");
                    $('td', row).eq(2).html("<img src='" + datat.manual_image + "' width='100px'>");

                },
                "language": {
                    "paginate": {
                        "first": "首页",
                        "previous": "上一页",
                        "next": "下一页",
                        "last": "尾页"
                    },
                    "zeroRecords": "无数据"
                },
                "columns":
                    [
                        { "data": "drug_image", "width": "100px" },
                        { "data": "drug_name", "width": "auto" },
                        { "data": "manual_image", "width": "100px" },
                        { "data": "abbreviation", "width": "auto" },
                        { "data": "category_name", "width": "auto" },
                        { "data": "factory", "width": "auto" },
                        { "data": "specification", "width": "auto" },
                        { "data": "situation_name", "width": "auto" },
                        { "data": "id", "width": "auto" }
                    ],
                "bAutoWidth": false
            });
        }
        // 初始化表格
        tb = mySearch();


        var timeout = null;








        //// 添加机器名称下拉列表和机器ID下拉列表
        //function machineIdNameSelecter(machineGourpId) {
        //    $("#machine_name").empty();
        //    $("#machine_id").empty();
        //    var m_selecter_obj = JSON.parse(commonBind.MachineSelecterJson(machineGourpId));
        //    var machineName = "<option value='0'>全部</option>"
        //    var machineId = "<option value='0'>全部</option>"
        //    for (var mindex = 0; mindex < m_selecter_obj.length; mindex++) {
        //        machineName += "<option value='" + m_selecter_obj[mindex].id + "'>" + m_selecter_obj[mindex].machine_name + "</option>";
        //        machineId += "<option value='" + m_selecter_obj[mindex].id + "'>" + m_selecter_obj[mindex].machine_id + "</option>";
        //    }
        //    $("#machine_name").append(machineName);
        //    $("#machine_id").append(machineId);
        //    $('#machine_name').selectpicker('refresh');
        //    $('#machine_name').selectpicker('render');
        //    $('#machine_id').selectpicker('refresh');
        //    $('#machine_id').selectpicker('render');
        //}
        //machineIdNameSelecter('0');

        //// 修改界面初始化信息
        //function alterModlInit(obj) {
        //    currentRow = getRow(obj);
        //    $("#machineID").val($("td", currentRow).eq(0).text());
        //    $("#machineName").val($("td", currentRow).eq(1).text());
        //    $("#location").val($("td", currentRow).eq(2).text());
        //    if ($("option[value=" + $(currentRow).attr("data-s-id") + "]", "#adminus").length > 0) {
        //        $("#adminus").selectpicker("val", $(currentRow).attr("data-s-id"));
        //    } else {
        //        $("#adminus").selectpicker("val", '0');
        //    }
        //    if ($("option[value=" + $(currentRow).attr("data-p-id") + "]", "#pyus").length > 0) {
        //        $("#pyus").selectpicker("val", $(currentRow).attr("data-p-id"));
        //    } else {
        //        $("#pyus").selectpicker("val", '0');
        //    }
        //}



        //// 添加药师和管理员下拉框
        //$("#adminus").empty();
        //$("#pyus").empty();

        //var userObj = JSON.parse(commonBind.UserSelecter());
        //var userNAME = "<option value='0'>无</option>"
        //for (var ind = 0; ind < userObj.length; ind++) {
        //    userNAME += "<option value='" + userObj[ind].id + "'>" + userObj[ind].un + "</option>";
        //}
        //$("#adminus").append(userNAME);
        //$("#pyus").append(userNAME);
        //$('#adminus').selectpicker('refresh');
        //$('#adminus').selectpicker('render');
        //$('#pyus').selectpicker('refresh');
        //$('#pyus').selectpicker('render');

    </script>

</body>

</html>